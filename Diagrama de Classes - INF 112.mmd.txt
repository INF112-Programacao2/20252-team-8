---
config:
  layout: elk
---
classDiagram
direction TB
    class TelaBase {
	    #titulo: string
	    #limparTela() : void
	    #aguardarEnter() : void
	    +exibirTela() : void
    }
    class TelaPrincipal {
	    +TelaPrincipal(controlador: ControladorPrincipal)
	    -mostrarPerfil() : void
	    -mostrarInventario() : void
	    -mostrarLoja() : void
	    +exibirTela() : void
    }
    class TelaPerfil {
	    +TelaPerfil(controlador: ControladorPerfil)
	    -mostrarDadosUsuario() : void
	    -mostrarEstatisticas() : void
	    -fluxoTrocarNome() : void
	    +exibirTela() : void
    }
    class TelaInventario {
	    +TelaInventario(controlador: ControladorLoja)
	    -mostrarItensAdquiridos() : void
	    +exibirTela() : void
    }
    class TelaLoja {
	    +TelaLoja(controlador: ControladorLoja)
	    -mostrarItensDisponiveis() : void
	    -mostrarSaldoMoedas() : int
	    -fluxoComprarItem() : void
	    +exibirTela() : void
    }
    class ControladorPrincipal {
	    +ControladorPrincipal()
	    +iniciar() : void
	    +navegarParaPerfil() : void
	    +navegarParaLoja() : void
	    +navegarParaInventario() : void
    }
    class ControladorPerfil {
	    +ControladorPerfil(repoUser: RepositorioUsuario)
	    +getUsuario() : Usuario
	    +trocarNome(novoNome: string) : bool
    }
    class ControladorLoja {
	    +ControladorLoja(repoUser: RepositorioUsuario, repoItens: RepositorioItens)
	    +getCatalogo() : List~Item~
	    +getItensComprados() : List~Item~
	    +comprarItem(item: Item) : bool
    }
    class ControladorGamificacao {
	    +ControladorGamificacao(repoUser: RepositorioUsuario, repoGame: RepositorioGamificacao)
	    +getBadgesUsuario() : List~Badge~
	    +getEstatisticas() : HistoricoEstudos
	    +processarSessao(sessao: SessaoEstudo) : void
    }
    class Usuario {
	    -nomeDeUsuario: string
	    -moedas: int
	    -pontos: int
	    -nivel: int
	    -historico: HistoricoEstudos
	    -inventario: Inventario
	    +Usuario()
	    +addMoedas(qnt: int) : void
	    +getMoedas() : int
	    +getNome() : string
    }
    class Inventario {
	    -itens: List~Item~
	    +adicionarItem(item: Item) : void
	    +getItens() : List~Item~
    }
    class HistoricoEstudos {
	    -tempoTotal : long
	    -sessoes : List~SessaoEstudo~
	    +adicionarSessao(sessao: SessaoEstudo) : void
	    +calcularTempoTotal() : void
    }
    class SessaoEstudo {
	    -dataInicio: string
	    -duracao: int
    }
    class Item {
	    -id: string
	    -nome: string
	    -descricao: string
	    -valor: int
    }
    class SistemaGamificacao {
	    -badges: List~Badge~
	    +SistemaGamificacao(regras: List~RegraBadge~)
	    +verificarDesbloqueios(usuario: Usuario) : List~Badge~
    }
    class Badge {
	    -id: string
	    -nome: string
	    -descricao: string
	    -desbloqueada: bool
    }
    class RepositorioBase {
	    #caminhoArquivo: string
	    #lerLinhasDoArquivo() : List~string~
	    #escreverLinhasNoArquivo(linhas: List~string~) : void
    }
    class RepositorioUsuario {
	    +salvar(usuario: Usuario) : void
	    +carregar() : Usuario
    }
    class RepositorioItens {
	    +carregarCatalogo() : List~Item~
    }
    class RepositorioGamificacao {
	    +carregarBadges() : List~Badge~
	    +salvarProgressoBadges(badges: List~Badge~) : void
    }

	<<abstract>> TelaBase
	<<abstract>> RepositorioBase

    TelaBase <|-- TelaPrincipal
    TelaBase <|-- TelaPerfil
    TelaBase <|-- TelaLoja
    TelaBase <|-- TelaInventario
    Usuario "1" *-- "1" Inventario
    Usuario "1" *-- "1" HistoricoEstudos
    HistoricoEstudos "1" *-- "0..*" SessaoEstudo
    Inventario "1" *-- "0..*" Item
    RepositorioBase <|-- RepositorioUsuario
    RepositorioBase <|-- RepositorioItens
    RepositorioBase <|-- RepositorioGamificacao
    TelaPrincipal ..> ControladorPrincipal
    TelaPerfil ..> ControladorPerfil
    TelaLoja ..> ControladorLoja
    TelaInventario ..> ControladorLoja
    ControladorPerfil ..> RepositorioUsuario
    ControladorLoja ..> RepositorioUsuario
    ControladorLoja ..> RepositorioItens
    ControladorGamificacao ..> RepositorioUsuario
    ControladorGamificacao ..> RepositorioGamificacao
    ControladorPerfil ..> Usuario
    ControladorLoja ..> Item
    ControladorLoja ..> Usuario
    ControladorGamificacao ..> SistemaGamificacao
    RepositorioUsuario ..> Usuario
    RepositorioItens ..> Item
    RepositorioGamificacao ..> Badge
    TelaPerfil ..> ControladorGamificacao
